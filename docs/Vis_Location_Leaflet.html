<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Ronja Seitz" />

<meta name="date" content="2025-07-03" />

<title>Creating Interactive Maps with Leaflet</title>

<script src="site_libs/header-attrs-2.29/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="site_libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="site_libs/leaflet-1.3.1/leaflet.js"></script>
<link href="site_libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="site_libs/proj4-2.6.2/proj4.min.js"></script>
<script src="site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="site_libs/leaflet-binding-2.2.2/leaflet.js"></script>
<script src="site_libs/leaflet-providers-2.0.0/leaflet-providers_2.0.0.js"></script>
<script src="site_libs/leaflet-providers-plugin-2.2.2/leaflet-providers-plugin.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Location data visualisation</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="about.html">About</a>
</li>
<li>
  <a href="Vis_Location_Leaflet.html">Leaflet Visualisation</a>
</li>
<li>
  <a href="Vis_Location_Rayshader.html">Rayshader Visualisation</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Creating Interactive Maps with Leaflet</h1>
<h4 class="author">Ronja Seitz</h4>
<h4 class="date">2025-07-03</h4>

</div>


<p>This R markdown script can be used to easily visualise reindeer
location data with different levels of informations and effort in
creating the map. We create interactive maps with the package leaflet
(<a href="https://doi.org/10.32614/CRAN.package.leaflet"
class="uri">https://doi.org/10.32614/CRAN.package.leaflet</a>).</p>
<div id="install-required-packages" class="section level4">
<h4><strong>Install required packages</strong></h4>
<p>This is only necessary once.</p>
<pre class="r"><code># install.packages(&quot;sf&quot;)
# install.packages(&quot;leaflet&quot;)
# install.packages(&quot;dplyr&quot;)</code></pre>
</div>
<div id="load-required-packages" class="section level4">
<h4><strong>Load required packages</strong></h4>
<pre class="r"><code>library(sf) #work with location data like points 
library(leaflet) #create interactive maps
library(dplyr) #to clean data

knitr::opts_chunk$set(cache = FALSE)</code></pre>
</div>
<div id="create-interactive-maps-with-leaflet" class="section level4">
<h4><strong>1. Create interactive maps with leaflet</strong></h4>
<p>Because commonly used base maps like Open Street Map are not
optimized for Svalbard we first add base maps from the Norsk Polar
institute (<a href="https://geodata.npolar.no/"
class="uri">https://geodata.npolar.no/</a>) as WMTS (Web Map Tile
Services) to the leaflet interface. To make different layers accesible
we also add the possibility to select which basemap to show.</p>
<pre class="r"><code># Step 1. Define WMTS URLs

svalbard_basemap_wmts &lt;- &quot;https://geodata.npolar.no/arcgis/rest/services/Basisdata/NP_Basiskart_Svalbard_WMTS_3857/MapServer/WMTS/tile/1.0.0/Basisdata_NP_Basiskart_Svalbard_WMTS_3857/default/default028mm/{z}/{y}/{x}.jpgpng&quot;

svalbard_satellite_wmts &lt;- &quot;https://geodata.npolar.no/arcgis/rest/services/Basisdata/NP_Satellitt_Svalbard_WMTS_3857/MapServer/WMTS/tile/1.0.0/Basisdata_NP_Satellitt_Svalbard_WMTS_3857/default/default028mm/{z}/{y}/{x}.jpgpng&quot;

# Step 2. Create Leaflet map with multiple basemaps and overlays
topo_map &lt;- leaflet() %&gt;%
  setView(lng = 15, lat = 78, zoom = 5) %&gt;%  # Center on Svalbard
  
  # Add basemap options
  addProviderTiles(providers$Esri.WorldImagery, group = &quot;Esri Satellite&quot;) %&gt;%
  addProviderTiles(providers$OpenStreetMap, group = &quot;OpenStreetMap&quot;) %&gt;%
  addProviderTiles(providers$CartoDB.Positron, group = &quot;CartoDB Light&quot;) %&gt;%
  
  # Add the Svalbard topogrpahic Basemap WMTS layer
  addWMSTiles(
    baseUrl = svalbard_basemap_wmts,
    layers = &quot;Basisdata_NP_Basiskart_Svalbard_WMTS_3857&quot;,
    options = WMSTileOptions(format = &quot;image/jpgpng&quot;, transparent = TRUE),
    group = &quot;Svalbard Basemap&quot;
  ) %&gt;%
  
  # Add the Svalbard Satellite WMTS layer
  addWMSTiles(
    baseUrl = svalbard_satellite_wmts,
    layers = &quot;Basisdata_NP_Satellitt_Svalbard_WMTS_3857&quot;,
    options = WMSTileOptions(format = &quot;image/jpgpng&quot;, transparent = TRUE),
    group = &quot;Svalbard Satellite&quot;
  ) %&gt;%
  
  # Add layer control to switch between base layers and overlays
  addLayersControl(
    baseGroups = c(&quot;Esri Satellite&quot;, &quot;OpenStreetMap&quot;, &quot;CartoDB Light&quot;),
    overlayGroups = c(&quot;Svalbard Basemap&quot;, &quot;Svalbard Satellite&quot;),
    options = layersControlOptions(collapsed = FALSE)
  )

# Step 3: Plot the map, which was defined in the previous step
topo_map</code></pre>
<div class="leaflet html-widget html-fill-item" id="htmlwidget-aab86dc0a24899e4cd05" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-aab86dc0a24899e4cd05">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"setView":[[78,15],5,[]],"calls":[{"method":"addProviderTiles","args":["Esri.WorldImagery",null,"Esri Satellite",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addProviderTiles","args":["OpenStreetMap",null,"OpenStreetMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addProviderTiles","args":["CartoDB.Positron",null,"CartoDB Light",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addWMSTiles","args":["https://geodata.npolar.no/arcgis/rest/services/Basisdata/NP_Basiskart_Svalbard_WMTS_3857/MapServer/WMTS/tile/1.0.0/Basisdata_NP_Basiskart_Svalbard_WMTS_3857/default/default028mm/{z}/{y}/{x}.jpgpng",null,"Svalbard Basemap",{"styles":"","format":"image/jpgpng","transparent":true,"version":"1.1.1","layers":"Basisdata_NP_Basiskart_Svalbard_WMTS_3857"}]},{"method":"addWMSTiles","args":["https://geodata.npolar.no/arcgis/rest/services/Basisdata/NP_Satellitt_Svalbard_WMTS_3857/MapServer/WMTS/tile/1.0.0/Basisdata_NP_Satellitt_Svalbard_WMTS_3857/default/default028mm/{z}/{y}/{x}.jpgpng",null,"Svalbard Satellite",{"styles":"","format":"image/jpgpng","transparent":true,"version":"1.1.1","layers":"Basisdata_NP_Satellitt_Svalbard_WMTS_3857"}]},{"method":"addLayersControl","args":[["Esri Satellite","OpenStreetMap","CartoDB Light"],["Svalbard Basemap","Svalbard Satellite"],{"collapsed":false,"autoZIndex":true,"position":"topright"}]}]},"evals":[],"jsHooks":[]}</script>
<p>Add Reindeer Location Points</p>
<pre class="r"><code># Step 1: Read the CSV file with the GPS data into R
data &lt;- read.csv(&quot;data/BIG_faeces_loc_202406.csv&quot;)

# Step 2: Clean up the UTM coordinates using parameter column names
valid_range &lt;- list(
  easting = c(400000, 900000),
  northing = c(6500000, 9500000)
)

data_clean &lt;- data %&gt;%
  filter(
    !is.na(utm_easting) &amp; 
    !is.na(utm_northing) &amp; 
    utm_easting &gt;= valid_range$easting[1] &amp; 
    utm_easting &lt;= valid_range$easting[2] &amp;
    utm_northing &gt;= valid_range$northing[1] &amp; 
    utm_northing &lt;= valid_range$northing[2]
  )

# Step 3: Create an sf object with UTM coordinates (EPSG:25833)
data_sf &lt;- st_as_sf(data_clean, coords = c(&quot;utm_easting&quot;, &quot;utm_northing&quot;), crs = 25833)

# Step 4: Reproject the coordinates to EPSG:4326 for use in leaflet
data_projected &lt;- st_transform(data_sf, crs = 4326)

# Step 5: Extract the longitude and latitude
lng &lt;- st_coordinates(data_projected)[, 1]
lat &lt;- st_coordinates(data_projected)[, 2]

# Step 6: Create a copy of the base map
reindeer_map &lt;- topo_map

# Step 7: Add markers to the Leaflet map
for (i in 1:length(lng)) {
  reindeer_map &lt;- reindeer_map %&gt;%
    addCircleMarkers(
      lng = lng[i], 
      lat = lat[i], 
      radius = 2, 
      color = &quot;white&quot;, 
      fill = TRUE, 
      fillColor = &quot;grey&quot;, 
      fillOpacity = 0.7, 
      opacity = 1,
      popup = paste(
        &quot;Infos:&quot;, 
        &quot;&lt;br&gt;Date:&quot;, data_projected[[&quot;date..yyyy.mm.dd.&quot;]][i], 
        &quot;&lt;br&gt;Sex:&quot;, data_projected[[&quot;reindeer_sex&quot;]][i], 
        &quot;&lt;br&gt;Age:&quot;, data_projected[[&quot;reindeer_age&quot;]][i]
      )
    )
}

# Step 8: Plot the map
reindeer_map</code></pre>
<div class="leaflet html-widget html-fill-item" id="htmlwidget-ed6c6dbceafa04a270bf" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-ed6c6dbceafa04a270bf">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"setView":[[78,15],5,[]],"calls":[{"method":"addProviderTiles","args":["Esri.WorldImagery",null,"Esri Satellite",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addProviderTiles","args":["OpenStreetMap",null,"OpenStreetMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addProviderTiles","args":["CartoDB.Positron",null,"CartoDB Light",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addWMSTiles","args":["https://geodata.npolar.no/arcgis/rest/services/Basisdata/NP_Basiskart_Svalbard_WMTS_3857/MapServer/WMTS/tile/1.0.0/Basisdata_NP_Basiskart_Svalbard_WMTS_3857/default/default028mm/{z}/{y}/{x}.jpgpng",null,"Svalbard Basemap",{"styles":"","format":"image/jpgpng","transparent":true,"version":"1.1.1","layers":"Basisdata_NP_Basiskart_Svalbard_WMTS_3857"}]},{"method":"addWMSTiles","args":["https://geodata.npolar.no/arcgis/rest/services/Basisdata/NP_Satellitt_Svalbard_WMTS_3857/MapServer/WMTS/tile/1.0.0/Basisdata_NP_Satellitt_Svalbard_WMTS_3857/default/default028mm/{z}/{y}/{x}.jpgpng",null,"Svalbard Satellite",{"styles":"","format":"image/jpgpng","transparent":true,"version":"1.1.1","layers":"Basisdata_NP_Satellitt_Svalbard_WMTS_3857"}]},{"method":"addLayersControl","args":[["Esri Satellite","OpenStreetMap","CartoDB Light"],["Svalbard Basemap","Svalbard Satellite"],{"collapsed":false,"autoZIndex":true,"position":"topright"}]},{"method":"addCircleMarkers","args":[78.17145031354282,16.05454653821673,2,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":5,"opacity":1,"fill":true,"fillColor":"grey","fillOpacity":0.7},null,null,"Infos: <br>Date: 2024-06-12 <br>Sex: male <br>Age: adult",null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.16939305206091,16.05104462451662,2,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":5,"opacity":1,"fill":true,"fillColor":"grey","fillOpacity":0.7},null,null,"Infos: <br>Date: 2024-06-12 <br>Sex: male <br>Age: adult",null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.17138254554312,16.01135834820758,2,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":5,"opacity":1,"fill":true,"fillColor":"grey","fillOpacity":0.7},null,null,"Infos: <br>Date: 2024-06-13 <br>Sex: male <br>Age: adult",null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.17138130694097,16.01170789538193,2,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":5,"opacity":1,"fill":true,"fillColor":"grey","fillOpacity":0.7},null,null,"Infos: <br>Date: 2024-06-13 <br>Sex: male <br>Age: adult",null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.17179179945606,16.00203935015829,2,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":5,"opacity":1,"fill":true,"fillColor":"grey","fillOpacity":0.7},null,null,"Infos: <br>Date: 2024-06-13 <br>Sex: male <br>Age: adult",null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.17205055939559,16.01504248223484,2,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":5,"opacity":1,"fill":true,"fillColor":"grey","fillOpacity":0.7},null,null,"Infos: <br>Date: 2024-06-13 <br>Sex: male <br>Age: yearling",null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.172034815785,16.01442922656643,2,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":5,"opacity":1,"fill":true,"fillColor":"grey","fillOpacity":0.7},null,null,"Infos: <br>Date: 2024-06-13 <br>Sex: female <br>Age: adult",null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.17178328301102,16.01711785885441,2,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":5,"opacity":1,"fill":true,"fillColor":"grey","fillOpacity":0.7},null,null,"Infos: <br>Date: 2024-06-13 <br>Sex: male <br>Age: adult",null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.17226277808874,16.01584720657739,2,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":5,"opacity":1,"fill":true,"fillColor":"grey","fillOpacity":0.7},null,null,"Infos: <br>Date: 2024-06-13 <br>Sex: male <br>Age: adult",null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.18333507911674,15.9136241098267,2,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":5,"opacity":1,"fill":true,"fillColor":"grey","fillOpacity":0.7},null,null,"Infos: <br>Date: 2024-06-13 <br>Sex: male <br>Age: adult",null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.1837410421669,15.91278003931551,2,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":5,"opacity":1,"fill":true,"fillColor":"grey","fillOpacity":0.7},null,null,"Infos: <br>Date: 2024-06-13 <br>Sex: male <br>Age: adult",null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.18983908779074,15.84128303108835,2,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":5,"opacity":1,"fill":true,"fillColor":"grey","fillOpacity":0.7},null,null,"Infos: <br>Date: 2024-06-19 <br>Sex: male <br>Age: adult",null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.19026579049003,15.84245109821601,2,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":5,"opacity":1,"fill":true,"fillColor":"grey","fillOpacity":0.7},null,null,"Infos: <br>Date: 2024-06-19 <br>Sex: male <br>Age: adult",null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.17381766676965,15.95748815042616,2,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":5,"opacity":1,"fill":true,"fillColor":"grey","fillOpacity":0.7},null,null,"Infos: <br>Date: 2024-06-26 <br>Sex: male <br>Age: adult",null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.1694067551699,15.96600713972784,2,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":5,"opacity":1,"fill":true,"fillColor":"grey","fillOpacity":0.7},null,null,"Infos: <br>Date: 2024-06-26 <br>Sex: male <br>Age: adult",null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.1694305261456,15.96692672743852,2,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":5,"opacity":1,"fill":true,"fillColor":"grey","fillOpacity":0.7},null,null,"Infos: <br>Date: 2024-06-26 <br>Sex: male <br>Age: adult",null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.16965169160051,15.967774835567,2,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":5,"opacity":1,"fill":true,"fillColor":"grey","fillOpacity":0.7},null,null,"Infos: <br>Date: 2024-06-26 <br>Sex: male <br>Age: adult",null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.17157339563755,16.03314065456143,2,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":5,"opacity":1,"fill":true,"fillColor":"grey","fillOpacity":0.7},null,null,"Infos: <br>Date: 2024-06-27 <br>Sex: male <br>Age: adult",null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.16915162443881,16.03865674111351,2,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":5,"opacity":1,"fill":true,"fillColor":"grey","fillOpacity":0.7},null,null,"Infos: <br>Date: 2024-06-27 <br>Sex: male <br>Age: adult",null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.17106705863596,16.07321901530927,2,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":5,"opacity":1,"fill":true,"fillColor":"grey","fillOpacity":0.7},null,null,"Infos: <br>Date: 2024-06-27 <br>Sex: male <br>Age: adult",null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.17159312714453,16.07868585521937,2,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":5,"opacity":1,"fill":true,"fillColor":"grey","fillOpacity":0.7},null,null,"Infos: <br>Date: 2024-06-27 <br>Sex: female <br>Age: yearling",null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[78.16915162443881,78.19026579049003],"lng":[15.84128303108835,16.07868585521937]}},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code># Create stylish labels with HTML/CSS
label_text &lt;- lapply(1:nrow(data_projected), function(i) {
  htmltools::HTML(paste0(
    &quot;&lt;div style=&#39;font-family: Arial, sans-serif; padding: 6px;&#39;&gt;
       &lt;div style=&#39;background-color: #2c3e50; color: white; padding: 4px 8px; 
                   border-radius: 3px 3px 0 0; font-weight: bold;&#39;&gt;
         Observation &quot;, i, &quot;
       &lt;/div&gt;
       &lt;div style=&#39;padding: 6px; border: 1px solid #ddd; border-top: none;
                   border-radius: 0 0 3px 3px; background-color: #f9f9f9;&#39;&gt;
         &lt;b&gt;Date: &lt;/b&gt;&quot;, data_projected[[&quot;date..yyyy.mm.dd.&quot;]][i], &quot;&lt;br/&gt;
         &lt;b&gt;Sex: &lt;/b&gt;&quot;, data_projected[[&quot;reindeer_sex&quot;]][i], &quot;&lt;br/&gt;
         &lt;b&gt;Age: &lt;/b&gt;&quot;, data_projected[[&quot;reindeer_age&quot;]][i], &quot;&lt;br/&gt;
         &lt;b&gt;Coordinates:&lt;/b&gt;&lt;br/&gt;
         &lt;span style=&#39;font-size: 0.9em; color: #555;&#39;&gt;
           &quot;, round(lat[i], 4), &quot;°N, &quot;, round(lng[i], 4), &quot;°E
         &lt;/span&gt;
       &lt;/div&gt;
     &lt;/div&gt;&quot;
  ))
})

# Define fixed colors for each sex
sex_colors &lt;- c(
  &quot;male&quot; = &quot;green&quot;,
  &quot;female&quot; = &quot;yellow&quot;,
  &quot;unknown&quot; = &quot;#95a5a6&quot;
)

# Create advanced map with sex-based coloring
advanced_reindeer_markers_map &lt;- topo_map

for (i in 1:length(lng)) {
  current_sex &lt;- data_projected[[&quot;reindeer_sex&quot;]][i]
  marker_color &lt;- ifelse(current_sex %in% names(sex_colors),
                        sex_colors[current_sex],
                        &quot;#95a5a6&quot;)
  
  advanced_reindeer_markers_map &lt;- advanced_reindeer_markers_map %&gt;%  
    addCircleMarkers(  
      lng = lng[i],  
      lat = lat[i],  
      radius = 5,  
      color = &quot;white&quot;,          
      fillColor = marker_color,
      fillOpacity = 0.8,  
      weight = 1.5,  
      popup = label_text[[i]],  
      label = paste(&quot;Observation&quot;, i)  
    )  
}

# Add legend for sex colors
advanced_reindeer_markers_map &lt;- advanced_reindeer_markers_map %&gt;%
  addLegend(
    position = &quot;bottomright&quot;,
    colors = sex_colors,
    labels = names(sex_colors),
    title = &quot;Reindeer Sex&quot;,
    opacity = 0.8
  )

# Output the map
advanced_reindeer_markers_map</code></pre>
<div class="leaflet html-widget html-fill-item" id="htmlwidget-f55c1ee59deeb41203ab" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-f55c1ee59deeb41203ab">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"setView":[[78,15],5,[]],"calls":[{"method":"addProviderTiles","args":["Esri.WorldImagery",null,"Esri Satellite",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addProviderTiles","args":["OpenStreetMap",null,"OpenStreetMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addProviderTiles","args":["CartoDB.Positron",null,"CartoDB Light",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addWMSTiles","args":["https://geodata.npolar.no/arcgis/rest/services/Basisdata/NP_Basiskart_Svalbard_WMTS_3857/MapServer/WMTS/tile/1.0.0/Basisdata_NP_Basiskart_Svalbard_WMTS_3857/default/default028mm/{z}/{y}/{x}.jpgpng",null,"Svalbard Basemap",{"styles":"","format":"image/jpgpng","transparent":true,"version":"1.1.1","layers":"Basisdata_NP_Basiskart_Svalbard_WMTS_3857"}]},{"method":"addWMSTiles","args":["https://geodata.npolar.no/arcgis/rest/services/Basisdata/NP_Satellitt_Svalbard_WMTS_3857/MapServer/WMTS/tile/1.0.0/Basisdata_NP_Satellitt_Svalbard_WMTS_3857/default/default028mm/{z}/{y}/{x}.jpgpng",null,"Svalbard Satellite",{"styles":"","format":"image/jpgpng","transparent":true,"version":"1.1.1","layers":"Basisdata_NP_Satellitt_Svalbard_WMTS_3857"}]},{"method":"addLayersControl","args":[["Esri Satellite","OpenStreetMap","CartoDB Light"],["Svalbard Basemap","Svalbard Satellite"],{"collapsed":false,"autoZIndex":true,"position":"topright"}]},{"method":"addCircleMarkers","args":[78.17145031354282,16.05454653821673,5,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":1.5,"opacity":0.5,"fill":true,"fillColor":"green","fillOpacity":0.8},null,null,"<div style='font-family: Arial, sans-serif; padding: 6px;'>\n       <div style='background-color: #2c3e50; color: white; padding: 4px 8px; \n                   border-radius: 3px 3px 0 0; font-weight: bold;'>\n         Observation 1\n       <\/div>\n       <div style='padding: 6px; border: 1px solid #ddd; border-top: none;\n                   border-radius: 0 0 3px 3px; background-color: #f9f9f9;'>\n         <b>Date: <\/b>2024-06-12<br/>\n         <b>Sex: <\/b>male<br/>\n         <b>Age: <\/b>adult<br/>\n         <b>Coordinates:<\/b><br/>\n         <span style='font-size: 0.9em; color: #555;'>\n           78.1715°N, 16.0545°E\n         <\/span>\n       <\/div>\n     <\/div>",null,"Observation 1",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.16939305206091,16.05104462451662,5,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":1.5,"opacity":0.5,"fill":true,"fillColor":"green","fillOpacity":0.8},null,null,"<div style='font-family: Arial, sans-serif; padding: 6px;'>\n       <div style='background-color: #2c3e50; color: white; padding: 4px 8px; \n                   border-radius: 3px 3px 0 0; font-weight: bold;'>\n         Observation 2\n       <\/div>\n       <div style='padding: 6px; border: 1px solid #ddd; border-top: none;\n                   border-radius: 0 0 3px 3px; background-color: #f9f9f9;'>\n         <b>Date: <\/b>2024-06-12<br/>\n         <b>Sex: <\/b>male<br/>\n         <b>Age: <\/b>adult<br/>\n         <b>Coordinates:<\/b><br/>\n         <span style='font-size: 0.9em; color: #555;'>\n           78.1694°N, 16.051°E\n         <\/span>\n       <\/div>\n     <\/div>",null,"Observation 2",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.17138254554312,16.01135834820758,5,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":1.5,"opacity":0.5,"fill":true,"fillColor":"green","fillOpacity":0.8},null,null,"<div style='font-family: Arial, sans-serif; padding: 6px;'>\n       <div style='background-color: #2c3e50; color: white; padding: 4px 8px; \n                   border-radius: 3px 3px 0 0; font-weight: bold;'>\n         Observation 3\n       <\/div>\n       <div style='padding: 6px; border: 1px solid #ddd; border-top: none;\n                   border-radius: 0 0 3px 3px; background-color: #f9f9f9;'>\n         <b>Date: <\/b>2024-06-13<br/>\n         <b>Sex: <\/b>male<br/>\n         <b>Age: <\/b>adult<br/>\n         <b>Coordinates:<\/b><br/>\n         <span style='font-size: 0.9em; color: #555;'>\n           78.1714°N, 16.0114°E\n         <\/span>\n       <\/div>\n     <\/div>",null,"Observation 3",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.17138130694097,16.01170789538193,5,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":1.5,"opacity":0.5,"fill":true,"fillColor":"green","fillOpacity":0.8},null,null,"<div style='font-family: Arial, sans-serif; padding: 6px;'>\n       <div style='background-color: #2c3e50; color: white; padding: 4px 8px; \n                   border-radius: 3px 3px 0 0; font-weight: bold;'>\n         Observation 4\n       <\/div>\n       <div style='padding: 6px; border: 1px solid #ddd; border-top: none;\n                   border-radius: 0 0 3px 3px; background-color: #f9f9f9;'>\n         <b>Date: <\/b>2024-06-13<br/>\n         <b>Sex: <\/b>male<br/>\n         <b>Age: <\/b>adult<br/>\n         <b>Coordinates:<\/b><br/>\n         <span style='font-size: 0.9em; color: #555;'>\n           78.1714°N, 16.0117°E\n         <\/span>\n       <\/div>\n     <\/div>",null,"Observation 4",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.17179179945606,16.00203935015829,5,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":1.5,"opacity":0.5,"fill":true,"fillColor":"green","fillOpacity":0.8},null,null,"<div style='font-family: Arial, sans-serif; padding: 6px;'>\n       <div style='background-color: #2c3e50; color: white; padding: 4px 8px; \n                   border-radius: 3px 3px 0 0; font-weight: bold;'>\n         Observation 5\n       <\/div>\n       <div style='padding: 6px; border: 1px solid #ddd; border-top: none;\n                   border-radius: 0 0 3px 3px; background-color: #f9f9f9;'>\n         <b>Date: <\/b>2024-06-13<br/>\n         <b>Sex: <\/b>male<br/>\n         <b>Age: <\/b>adult<br/>\n         <b>Coordinates:<\/b><br/>\n         <span style='font-size: 0.9em; color: #555;'>\n           78.1718°N, 16.002°E\n         <\/span>\n       <\/div>\n     <\/div>",null,"Observation 5",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.17205055939559,16.01504248223484,5,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":1.5,"opacity":0.5,"fill":true,"fillColor":"green","fillOpacity":0.8},null,null,"<div style='font-family: Arial, sans-serif; padding: 6px;'>\n       <div style='background-color: #2c3e50; color: white; padding: 4px 8px; \n                   border-radius: 3px 3px 0 0; font-weight: bold;'>\n         Observation 6\n       <\/div>\n       <div style='padding: 6px; border: 1px solid #ddd; border-top: none;\n                   border-radius: 0 0 3px 3px; background-color: #f9f9f9;'>\n         <b>Date: <\/b>2024-06-13<br/>\n         <b>Sex: <\/b>male<br/>\n         <b>Age: <\/b>yearling<br/>\n         <b>Coordinates:<\/b><br/>\n         <span style='font-size: 0.9em; color: #555;'>\n           78.1721°N, 16.015°E\n         <\/span>\n       <\/div>\n     <\/div>",null,"Observation 6",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.172034815785,16.01442922656643,5,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":1.5,"opacity":0.5,"fill":true,"fillColor":"yellow","fillOpacity":0.8},null,null,"<div style='font-family: Arial, sans-serif; padding: 6px;'>\n       <div style='background-color: #2c3e50; color: white; padding: 4px 8px; \n                   border-radius: 3px 3px 0 0; font-weight: bold;'>\n         Observation 7\n       <\/div>\n       <div style='padding: 6px; border: 1px solid #ddd; border-top: none;\n                   border-radius: 0 0 3px 3px; background-color: #f9f9f9;'>\n         <b>Date: <\/b>2024-06-13<br/>\n         <b>Sex: <\/b>female<br/>\n         <b>Age: <\/b>adult<br/>\n         <b>Coordinates:<\/b><br/>\n         <span style='font-size: 0.9em; color: #555;'>\n           78.172°N, 16.0144°E\n         <\/span>\n       <\/div>\n     <\/div>",null,"Observation 7",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.17178328301102,16.01711785885441,5,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":1.5,"opacity":0.5,"fill":true,"fillColor":"green","fillOpacity":0.8},null,null,"<div style='font-family: Arial, sans-serif; padding: 6px;'>\n       <div style='background-color: #2c3e50; color: white; padding: 4px 8px; \n                   border-radius: 3px 3px 0 0; font-weight: bold;'>\n         Observation 8\n       <\/div>\n       <div style='padding: 6px; border: 1px solid #ddd; border-top: none;\n                   border-radius: 0 0 3px 3px; background-color: #f9f9f9;'>\n         <b>Date: <\/b>2024-06-13<br/>\n         <b>Sex: <\/b>male<br/>\n         <b>Age: <\/b>adult<br/>\n         <b>Coordinates:<\/b><br/>\n         <span style='font-size: 0.9em; color: #555;'>\n           78.1718°N, 16.0171°E\n         <\/span>\n       <\/div>\n     <\/div>",null,"Observation 8",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.17226277808874,16.01584720657739,5,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":1.5,"opacity":0.5,"fill":true,"fillColor":"green","fillOpacity":0.8},null,null,"<div style='font-family: Arial, sans-serif; padding: 6px;'>\n       <div style='background-color: #2c3e50; color: white; padding: 4px 8px; \n                   border-radius: 3px 3px 0 0; font-weight: bold;'>\n         Observation 9\n       <\/div>\n       <div style='padding: 6px; border: 1px solid #ddd; border-top: none;\n                   border-radius: 0 0 3px 3px; background-color: #f9f9f9;'>\n         <b>Date: <\/b>2024-06-13<br/>\n         <b>Sex: <\/b>male<br/>\n         <b>Age: <\/b>adult<br/>\n         <b>Coordinates:<\/b><br/>\n         <span style='font-size: 0.9em; color: #555;'>\n           78.1723°N, 16.0158°E\n         <\/span>\n       <\/div>\n     <\/div>",null,"Observation 9",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.18333507911674,15.9136241098267,5,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":1.5,"opacity":0.5,"fill":true,"fillColor":"green","fillOpacity":0.8},null,null,"<div style='font-family: Arial, sans-serif; padding: 6px;'>\n       <div style='background-color: #2c3e50; color: white; padding: 4px 8px; \n                   border-radius: 3px 3px 0 0; font-weight: bold;'>\n         Observation 10\n       <\/div>\n       <div style='padding: 6px; border: 1px solid #ddd; border-top: none;\n                   border-radius: 0 0 3px 3px; background-color: #f9f9f9;'>\n         <b>Date: <\/b>2024-06-13<br/>\n         <b>Sex: <\/b>male<br/>\n         <b>Age: <\/b>adult<br/>\n         <b>Coordinates:<\/b><br/>\n         <span style='font-size: 0.9em; color: #555;'>\n           78.1833°N, 15.9136°E\n         <\/span>\n       <\/div>\n     <\/div>",null,"Observation 10",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.1837410421669,15.91278003931551,5,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":1.5,"opacity":0.5,"fill":true,"fillColor":"green","fillOpacity":0.8},null,null,"<div style='font-family: Arial, sans-serif; padding: 6px;'>\n       <div style='background-color: #2c3e50; color: white; padding: 4px 8px; \n                   border-radius: 3px 3px 0 0; font-weight: bold;'>\n         Observation 11\n       <\/div>\n       <div style='padding: 6px; border: 1px solid #ddd; border-top: none;\n                   border-radius: 0 0 3px 3px; background-color: #f9f9f9;'>\n         <b>Date: <\/b>2024-06-13<br/>\n         <b>Sex: <\/b>male<br/>\n         <b>Age: <\/b>adult<br/>\n         <b>Coordinates:<\/b><br/>\n         <span style='font-size: 0.9em; color: #555;'>\n           78.1837°N, 15.9128°E\n         <\/span>\n       <\/div>\n     <\/div>",null,"Observation 11",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.18983908779074,15.84128303108835,5,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":1.5,"opacity":0.5,"fill":true,"fillColor":"green","fillOpacity":0.8},null,null,"<div style='font-family: Arial, sans-serif; padding: 6px;'>\n       <div style='background-color: #2c3e50; color: white; padding: 4px 8px; \n                   border-radius: 3px 3px 0 0; font-weight: bold;'>\n         Observation 12\n       <\/div>\n       <div style='padding: 6px; border: 1px solid #ddd; border-top: none;\n                   border-radius: 0 0 3px 3px; background-color: #f9f9f9;'>\n         <b>Date: <\/b>2024-06-19<br/>\n         <b>Sex: <\/b>male<br/>\n         <b>Age: <\/b>adult<br/>\n         <b>Coordinates:<\/b><br/>\n         <span style='font-size: 0.9em; color: #555;'>\n           78.1898°N, 15.8413°E\n         <\/span>\n       <\/div>\n     <\/div>",null,"Observation 12",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.19026579049003,15.84245109821601,5,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":1.5,"opacity":0.5,"fill":true,"fillColor":"green","fillOpacity":0.8},null,null,"<div style='font-family: Arial, sans-serif; padding: 6px;'>\n       <div style='background-color: #2c3e50; color: white; padding: 4px 8px; \n                   border-radius: 3px 3px 0 0; font-weight: bold;'>\n         Observation 13\n       <\/div>\n       <div style='padding: 6px; border: 1px solid #ddd; border-top: none;\n                   border-radius: 0 0 3px 3px; background-color: #f9f9f9;'>\n         <b>Date: <\/b>2024-06-19<br/>\n         <b>Sex: <\/b>male<br/>\n         <b>Age: <\/b>adult<br/>\n         <b>Coordinates:<\/b><br/>\n         <span style='font-size: 0.9em; color: #555;'>\n           78.1903°N, 15.8425°E\n         <\/span>\n       <\/div>\n     <\/div>",null,"Observation 13",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.17381766676965,15.95748815042616,5,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":1.5,"opacity":0.5,"fill":true,"fillColor":"green","fillOpacity":0.8},null,null,"<div style='font-family: Arial, sans-serif; padding: 6px;'>\n       <div style='background-color: #2c3e50; color: white; padding: 4px 8px; \n                   border-radius: 3px 3px 0 0; font-weight: bold;'>\n         Observation 14\n       <\/div>\n       <div style='padding: 6px; border: 1px solid #ddd; border-top: none;\n                   border-radius: 0 0 3px 3px; background-color: #f9f9f9;'>\n         <b>Date: <\/b>2024-06-26<br/>\n         <b>Sex: <\/b>male<br/>\n         <b>Age: <\/b>adult<br/>\n         <b>Coordinates:<\/b><br/>\n         <span style='font-size: 0.9em; color: #555;'>\n           78.1738°N, 15.9575°E\n         <\/span>\n       <\/div>\n     <\/div>",null,"Observation 14",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.1694067551699,15.96600713972784,5,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":1.5,"opacity":0.5,"fill":true,"fillColor":"green","fillOpacity":0.8},null,null,"<div style='font-family: Arial, sans-serif; padding: 6px;'>\n       <div style='background-color: #2c3e50; color: white; padding: 4px 8px; \n                   border-radius: 3px 3px 0 0; font-weight: bold;'>\n         Observation 15\n       <\/div>\n       <div style='padding: 6px; border: 1px solid #ddd; border-top: none;\n                   border-radius: 0 0 3px 3px; background-color: #f9f9f9;'>\n         <b>Date: <\/b>2024-06-26<br/>\n         <b>Sex: <\/b>male<br/>\n         <b>Age: <\/b>adult<br/>\n         <b>Coordinates:<\/b><br/>\n         <span style='font-size: 0.9em; color: #555;'>\n           78.1694°N, 15.966°E\n         <\/span>\n       <\/div>\n     <\/div>",null,"Observation 15",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.1694305261456,15.96692672743852,5,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":1.5,"opacity":0.5,"fill":true,"fillColor":"green","fillOpacity":0.8},null,null,"<div style='font-family: Arial, sans-serif; padding: 6px;'>\n       <div style='background-color: #2c3e50; color: white; padding: 4px 8px; \n                   border-radius: 3px 3px 0 0; font-weight: bold;'>\n         Observation 16\n       <\/div>\n       <div style='padding: 6px; border: 1px solid #ddd; border-top: none;\n                   border-radius: 0 0 3px 3px; background-color: #f9f9f9;'>\n         <b>Date: <\/b>2024-06-26<br/>\n         <b>Sex: <\/b>male<br/>\n         <b>Age: <\/b>adult<br/>\n         <b>Coordinates:<\/b><br/>\n         <span style='font-size: 0.9em; color: #555;'>\n           78.1694°N, 15.9669°E\n         <\/span>\n       <\/div>\n     <\/div>",null,"Observation 16",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.16965169160051,15.967774835567,5,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":1.5,"opacity":0.5,"fill":true,"fillColor":"green","fillOpacity":0.8},null,null,"<div style='font-family: Arial, sans-serif; padding: 6px;'>\n       <div style='background-color: #2c3e50; color: white; padding: 4px 8px; \n                   border-radius: 3px 3px 0 0; font-weight: bold;'>\n         Observation 17\n       <\/div>\n       <div style='padding: 6px; border: 1px solid #ddd; border-top: none;\n                   border-radius: 0 0 3px 3px; background-color: #f9f9f9;'>\n         <b>Date: <\/b>2024-06-26<br/>\n         <b>Sex: <\/b>male<br/>\n         <b>Age: <\/b>adult<br/>\n         <b>Coordinates:<\/b><br/>\n         <span style='font-size: 0.9em; color: #555;'>\n           78.1697°N, 15.9678°E\n         <\/span>\n       <\/div>\n     <\/div>",null,"Observation 17",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.17157339563755,16.03314065456143,5,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":1.5,"opacity":0.5,"fill":true,"fillColor":"green","fillOpacity":0.8},null,null,"<div style='font-family: Arial, sans-serif; padding: 6px;'>\n       <div style='background-color: #2c3e50; color: white; padding: 4px 8px; \n                   border-radius: 3px 3px 0 0; font-weight: bold;'>\n         Observation 18\n       <\/div>\n       <div style='padding: 6px; border: 1px solid #ddd; border-top: none;\n                   border-radius: 0 0 3px 3px; background-color: #f9f9f9;'>\n         <b>Date: <\/b>2024-06-27<br/>\n         <b>Sex: <\/b>male<br/>\n         <b>Age: <\/b>adult<br/>\n         <b>Coordinates:<\/b><br/>\n         <span style='font-size: 0.9em; color: #555;'>\n           78.1716°N, 16.0331°E\n         <\/span>\n       <\/div>\n     <\/div>",null,"Observation 18",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.16915162443881,16.03865674111351,5,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":1.5,"opacity":0.5,"fill":true,"fillColor":"green","fillOpacity":0.8},null,null,"<div style='font-family: Arial, sans-serif; padding: 6px;'>\n       <div style='background-color: #2c3e50; color: white; padding: 4px 8px; \n                   border-radius: 3px 3px 0 0; font-weight: bold;'>\n         Observation 19\n       <\/div>\n       <div style='padding: 6px; border: 1px solid #ddd; border-top: none;\n                   border-radius: 0 0 3px 3px; background-color: #f9f9f9;'>\n         <b>Date: <\/b>2024-06-27<br/>\n         <b>Sex: <\/b>male<br/>\n         <b>Age: <\/b>adult<br/>\n         <b>Coordinates:<\/b><br/>\n         <span style='font-size: 0.9em; color: #555;'>\n           78.1692°N, 16.0387°E\n         <\/span>\n       <\/div>\n     <\/div>",null,"Observation 19",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.17106705863596,16.07321901530927,5,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":1.5,"opacity":0.5,"fill":true,"fillColor":"green","fillOpacity":0.8},null,null,"<div style='font-family: Arial, sans-serif; padding: 6px;'>\n       <div style='background-color: #2c3e50; color: white; padding: 4px 8px; \n                   border-radius: 3px 3px 0 0; font-weight: bold;'>\n         Observation 20\n       <\/div>\n       <div style='padding: 6px; border: 1px solid #ddd; border-top: none;\n                   border-radius: 0 0 3px 3px; background-color: #f9f9f9;'>\n         <b>Date: <\/b>2024-06-27<br/>\n         <b>Sex: <\/b>male<br/>\n         <b>Age: <\/b>adult<br/>\n         <b>Coordinates:<\/b><br/>\n         <span style='font-size: 0.9em; color: #555;'>\n           78.1711°N, 16.0732°E\n         <\/span>\n       <\/div>\n     <\/div>",null,"Observation 20",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.17159312714453,16.07868585521937,5,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":1.5,"opacity":0.5,"fill":true,"fillColor":"yellow","fillOpacity":0.8},null,null,"<div style='font-family: Arial, sans-serif; padding: 6px;'>\n       <div style='background-color: #2c3e50; color: white; padding: 4px 8px; \n                   border-radius: 3px 3px 0 0; font-weight: bold;'>\n         Observation 21\n       <\/div>\n       <div style='padding: 6px; border: 1px solid #ddd; border-top: none;\n                   border-radius: 0 0 3px 3px; background-color: #f9f9f9;'>\n         <b>Date: <\/b>2024-06-27<br/>\n         <b>Sex: <\/b>female<br/>\n         <b>Age: <\/b>yearling<br/>\n         <b>Coordinates:<\/b><br/>\n         <span style='font-size: 0.9em; color: #555;'>\n           78.1716°N, 16.0787°E\n         <\/span>\n       <\/div>\n     <\/div>",null,"Observation 21",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addLegend","args":[{"colors":["green","yellow","#95a5a6"],"labels":["male","female","unknown"],"na_color":null,"na_label":"NA","opacity":0.8,"position":"bottomright","type":"unknown","title":"Reindeer Sex","extra":null,"layerId":null,"className":"info legend","group":null}]}],"limits":{"lat":[78.16915162443881,78.19026579049003],"lng":[15.84128303108835,16.07868585521937]}},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code># Create stylish labels with HTML/CSS
label_text &lt;- lapply(1:nrow(data_projected), function(i) {
  htmltools::HTML(paste0(
    &quot;&lt;div style=&#39;font-family: Arial, sans-serif; padding: 6px;&#39;&gt;
       &lt;div style=&#39;background-color: #2c3e50; color: white; padding: 4px 8px; 
                   border-radius: 3px 3px 0 0; font-weight: bold;&#39;&gt;
         Observation &quot;, i, &quot;
       &lt;/div&gt;
       &lt;div style=&#39;padding: 6px; border: 1px solid #ddd; border-top: none;
                   border-radius: 0 0 3px 3px; background-color: #f9f9f9;&#39;&gt;
         &lt;b&gt;Date: &lt;/b&gt;&quot;, data_projected[[&quot;date..yyyy.mm.dd.&quot;]][i], &quot;&lt;br/&gt;
         &lt;b&gt;Sex: &lt;/b&gt;&quot;, data_projected[[&quot;reindeer_sex&quot;]][i], &quot;&lt;br/&gt;
         &lt;b&gt;Age: &lt;/b&gt;&quot;, data_projected[[&quot;reindeer_age&quot;]][i], &quot;&lt;br/&gt;
         &lt;b&gt;Coordinates:&lt;/b&gt;&lt;br/&gt;
         &lt;span style=&#39;font-size: 0.9em; color: #555;&#39;&gt;
           &quot;, round(lat[i], 4), &quot;°N, &quot;, round(lng[i], 4), &quot;°E
         &lt;/span&gt;
       &lt;/div&gt;
     &lt;/div&gt;&quot;
  ))
})

# Define fixed colors for each sex
sex_colors &lt;- c(
  &quot;male&quot; = &quot;green&quot;,
  &quot;female&quot; = &quot;yellow&quot;,
  &quot;unknown&quot; = &quot;#95a5a6&quot;  # Fixed spelling from &quot;unkown&quot; to &quot;unknown&quot;
)

# Create advanced map with sex-based coloring
advanced_reindeer_markers_map &lt;- topo_map

for (i in 1:length(lng)) {
  current_sex &lt;- data_projected[[&quot;reindeer_sex&quot;]][i]  # Fixed to use params
  marker_color &lt;- ifelse(current_sex %in% names(sex_colors),
                        sex_colors[current_sex],
                        &quot;#95a5a6&quot;)
  
  advanced_reindeer_markers_map &lt;- advanced_reindeer_markers_map %&gt;%  
    addCircleMarkers(  
      lng = lng[i],  
      lat = lat[i],  
      radius = 5,  
      color = &quot;white&quot;,          
      fillColor = marker_color,
      fillOpacity = 0.8,  
      weight = 1.5,  
      popup = label_text[[i]],  
      label = paste(&quot;Observation&quot;, i)  
    )  
}

# Add legend for sex colors
advanced_reindeer_markers_map &lt;- advanced_reindeer_markers_map %&gt;%
  addLegend(
    position = &quot;bottomright&quot;,
    colors = sex_colors,
    labels = names(sex_colors),
    title = &quot;Reindeer Sex&quot;,
    opacity = 0.8
  )

# Output the map
advanced_reindeer_markers_map</code></pre>
<div class="leaflet html-widget html-fill-item" id="htmlwidget-017eb7710f55127ce951" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-017eb7710f55127ce951">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"setView":[[78,15],5,[]],"calls":[{"method":"addProviderTiles","args":["Esri.WorldImagery",null,"Esri Satellite",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addProviderTiles","args":["OpenStreetMap",null,"OpenStreetMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addProviderTiles","args":["CartoDB.Positron",null,"CartoDB Light",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addWMSTiles","args":["https://geodata.npolar.no/arcgis/rest/services/Basisdata/NP_Basiskart_Svalbard_WMTS_3857/MapServer/WMTS/tile/1.0.0/Basisdata_NP_Basiskart_Svalbard_WMTS_3857/default/default028mm/{z}/{y}/{x}.jpgpng",null,"Svalbard Basemap",{"styles":"","format":"image/jpgpng","transparent":true,"version":"1.1.1","layers":"Basisdata_NP_Basiskart_Svalbard_WMTS_3857"}]},{"method":"addWMSTiles","args":["https://geodata.npolar.no/arcgis/rest/services/Basisdata/NP_Satellitt_Svalbard_WMTS_3857/MapServer/WMTS/tile/1.0.0/Basisdata_NP_Satellitt_Svalbard_WMTS_3857/default/default028mm/{z}/{y}/{x}.jpgpng",null,"Svalbard Satellite",{"styles":"","format":"image/jpgpng","transparent":true,"version":"1.1.1","layers":"Basisdata_NP_Satellitt_Svalbard_WMTS_3857"}]},{"method":"addLayersControl","args":[["Esri Satellite","OpenStreetMap","CartoDB Light"],["Svalbard Basemap","Svalbard Satellite"],{"collapsed":false,"autoZIndex":true,"position":"topright"}]},{"method":"addCircleMarkers","args":[78.17145031354282,16.05454653821673,5,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":1.5,"opacity":0.5,"fill":true,"fillColor":"green","fillOpacity":0.8},null,null,"<div style='font-family: Arial, sans-serif; padding: 6px;'>\n       <div style='background-color: #2c3e50; color: white; padding: 4px 8px; \n                   border-radius: 3px 3px 0 0; font-weight: bold;'>\n         Observation 1\n       <\/div>\n       <div style='padding: 6px; border: 1px solid #ddd; border-top: none;\n                   border-radius: 0 0 3px 3px; background-color: #f9f9f9;'>\n         <b>Date: <\/b>2024-06-12<br/>\n         <b>Sex: <\/b>male<br/>\n         <b>Age: <\/b>adult<br/>\n         <b>Coordinates:<\/b><br/>\n         <span style='font-size: 0.9em; color: #555;'>\n           78.1715°N, 16.0545°E\n         <\/span>\n       <\/div>\n     <\/div>",null,"Observation 1",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.16939305206091,16.05104462451662,5,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":1.5,"opacity":0.5,"fill":true,"fillColor":"green","fillOpacity":0.8},null,null,"<div style='font-family: Arial, sans-serif; padding: 6px;'>\n       <div style='background-color: #2c3e50; color: white; padding: 4px 8px; \n                   border-radius: 3px 3px 0 0; font-weight: bold;'>\n         Observation 2\n       <\/div>\n       <div style='padding: 6px; border: 1px solid #ddd; border-top: none;\n                   border-radius: 0 0 3px 3px; background-color: #f9f9f9;'>\n         <b>Date: <\/b>2024-06-12<br/>\n         <b>Sex: <\/b>male<br/>\n         <b>Age: <\/b>adult<br/>\n         <b>Coordinates:<\/b><br/>\n         <span style='font-size: 0.9em; color: #555;'>\n           78.1694°N, 16.051°E\n         <\/span>\n       <\/div>\n     <\/div>",null,"Observation 2",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.17138254554312,16.01135834820758,5,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":1.5,"opacity":0.5,"fill":true,"fillColor":"green","fillOpacity":0.8},null,null,"<div style='font-family: Arial, sans-serif; padding: 6px;'>\n       <div style='background-color: #2c3e50; color: white; padding: 4px 8px; \n                   border-radius: 3px 3px 0 0; font-weight: bold;'>\n         Observation 3\n       <\/div>\n       <div style='padding: 6px; border: 1px solid #ddd; border-top: none;\n                   border-radius: 0 0 3px 3px; background-color: #f9f9f9;'>\n         <b>Date: <\/b>2024-06-13<br/>\n         <b>Sex: <\/b>male<br/>\n         <b>Age: <\/b>adult<br/>\n         <b>Coordinates:<\/b><br/>\n         <span style='font-size: 0.9em; color: #555;'>\n           78.1714°N, 16.0114°E\n         <\/span>\n       <\/div>\n     <\/div>",null,"Observation 3",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.17138130694097,16.01170789538193,5,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":1.5,"opacity":0.5,"fill":true,"fillColor":"green","fillOpacity":0.8},null,null,"<div style='font-family: Arial, sans-serif; padding: 6px;'>\n       <div style='background-color: #2c3e50; color: white; padding: 4px 8px; \n                   border-radius: 3px 3px 0 0; font-weight: bold;'>\n         Observation 4\n       <\/div>\n       <div style='padding: 6px; border: 1px solid #ddd; border-top: none;\n                   border-radius: 0 0 3px 3px; background-color: #f9f9f9;'>\n         <b>Date: <\/b>2024-06-13<br/>\n         <b>Sex: <\/b>male<br/>\n         <b>Age: <\/b>adult<br/>\n         <b>Coordinates:<\/b><br/>\n         <span style='font-size: 0.9em; color: #555;'>\n           78.1714°N, 16.0117°E\n         <\/span>\n       <\/div>\n     <\/div>",null,"Observation 4",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.17179179945606,16.00203935015829,5,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":1.5,"opacity":0.5,"fill":true,"fillColor":"green","fillOpacity":0.8},null,null,"<div style='font-family: Arial, sans-serif; padding: 6px;'>\n       <div style='background-color: #2c3e50; color: white; padding: 4px 8px; \n                   border-radius: 3px 3px 0 0; font-weight: bold;'>\n         Observation 5\n       <\/div>\n       <div style='padding: 6px; border: 1px solid #ddd; border-top: none;\n                   border-radius: 0 0 3px 3px; background-color: #f9f9f9;'>\n         <b>Date: <\/b>2024-06-13<br/>\n         <b>Sex: <\/b>male<br/>\n         <b>Age: <\/b>adult<br/>\n         <b>Coordinates:<\/b><br/>\n         <span style='font-size: 0.9em; color: #555;'>\n           78.1718°N, 16.002°E\n         <\/span>\n       <\/div>\n     <\/div>",null,"Observation 5",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.17205055939559,16.01504248223484,5,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":1.5,"opacity":0.5,"fill":true,"fillColor":"green","fillOpacity":0.8},null,null,"<div style='font-family: Arial, sans-serif; padding: 6px;'>\n       <div style='background-color: #2c3e50; color: white; padding: 4px 8px; \n                   border-radius: 3px 3px 0 0; font-weight: bold;'>\n         Observation 6\n       <\/div>\n       <div style='padding: 6px; border: 1px solid #ddd; border-top: none;\n                   border-radius: 0 0 3px 3px; background-color: #f9f9f9;'>\n         <b>Date: <\/b>2024-06-13<br/>\n         <b>Sex: <\/b>male<br/>\n         <b>Age: <\/b>yearling<br/>\n         <b>Coordinates:<\/b><br/>\n         <span style='font-size: 0.9em; color: #555;'>\n           78.1721°N, 16.015°E\n         <\/span>\n       <\/div>\n     <\/div>",null,"Observation 6",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.172034815785,16.01442922656643,5,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":1.5,"opacity":0.5,"fill":true,"fillColor":"yellow","fillOpacity":0.8},null,null,"<div style='font-family: Arial, sans-serif; padding: 6px;'>\n       <div style='background-color: #2c3e50; color: white; padding: 4px 8px; \n                   border-radius: 3px 3px 0 0; font-weight: bold;'>\n         Observation 7\n       <\/div>\n       <div style='padding: 6px; border: 1px solid #ddd; border-top: none;\n                   border-radius: 0 0 3px 3px; background-color: #f9f9f9;'>\n         <b>Date: <\/b>2024-06-13<br/>\n         <b>Sex: <\/b>female<br/>\n         <b>Age: <\/b>adult<br/>\n         <b>Coordinates:<\/b><br/>\n         <span style='font-size: 0.9em; color: #555;'>\n           78.172°N, 16.0144°E\n         <\/span>\n       <\/div>\n     <\/div>",null,"Observation 7",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.17178328301102,16.01711785885441,5,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":1.5,"opacity":0.5,"fill":true,"fillColor":"green","fillOpacity":0.8},null,null,"<div style='font-family: Arial, sans-serif; padding: 6px;'>\n       <div style='background-color: #2c3e50; color: white; padding: 4px 8px; \n                   border-radius: 3px 3px 0 0; font-weight: bold;'>\n         Observation 8\n       <\/div>\n       <div style='padding: 6px; border: 1px solid #ddd; border-top: none;\n                   border-radius: 0 0 3px 3px; background-color: #f9f9f9;'>\n         <b>Date: <\/b>2024-06-13<br/>\n         <b>Sex: <\/b>male<br/>\n         <b>Age: <\/b>adult<br/>\n         <b>Coordinates:<\/b><br/>\n         <span style='font-size: 0.9em; color: #555;'>\n           78.1718°N, 16.0171°E\n         <\/span>\n       <\/div>\n     <\/div>",null,"Observation 8",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.17226277808874,16.01584720657739,5,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":1.5,"opacity":0.5,"fill":true,"fillColor":"green","fillOpacity":0.8},null,null,"<div style='font-family: Arial, sans-serif; padding: 6px;'>\n       <div style='background-color: #2c3e50; color: white; padding: 4px 8px; \n                   border-radius: 3px 3px 0 0; font-weight: bold;'>\n         Observation 9\n       <\/div>\n       <div style='padding: 6px; border: 1px solid #ddd; border-top: none;\n                   border-radius: 0 0 3px 3px; background-color: #f9f9f9;'>\n         <b>Date: <\/b>2024-06-13<br/>\n         <b>Sex: <\/b>male<br/>\n         <b>Age: <\/b>adult<br/>\n         <b>Coordinates:<\/b><br/>\n         <span style='font-size: 0.9em; color: #555;'>\n           78.1723°N, 16.0158°E\n         <\/span>\n       <\/div>\n     <\/div>",null,"Observation 9",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.18333507911674,15.9136241098267,5,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":1.5,"opacity":0.5,"fill":true,"fillColor":"green","fillOpacity":0.8},null,null,"<div style='font-family: Arial, sans-serif; padding: 6px;'>\n       <div style='background-color: #2c3e50; color: white; padding: 4px 8px; \n                   border-radius: 3px 3px 0 0; font-weight: bold;'>\n         Observation 10\n       <\/div>\n       <div style='padding: 6px; border: 1px solid #ddd; border-top: none;\n                   border-radius: 0 0 3px 3px; background-color: #f9f9f9;'>\n         <b>Date: <\/b>2024-06-13<br/>\n         <b>Sex: <\/b>male<br/>\n         <b>Age: <\/b>adult<br/>\n         <b>Coordinates:<\/b><br/>\n         <span style='font-size: 0.9em; color: #555;'>\n           78.1833°N, 15.9136°E\n         <\/span>\n       <\/div>\n     <\/div>",null,"Observation 10",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.1837410421669,15.91278003931551,5,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":1.5,"opacity":0.5,"fill":true,"fillColor":"green","fillOpacity":0.8},null,null,"<div style='font-family: Arial, sans-serif; padding: 6px;'>\n       <div style='background-color: #2c3e50; color: white; padding: 4px 8px; \n                   border-radius: 3px 3px 0 0; font-weight: bold;'>\n         Observation 11\n       <\/div>\n       <div style='padding: 6px; border: 1px solid #ddd; border-top: none;\n                   border-radius: 0 0 3px 3px; background-color: #f9f9f9;'>\n         <b>Date: <\/b>2024-06-13<br/>\n         <b>Sex: <\/b>male<br/>\n         <b>Age: <\/b>adult<br/>\n         <b>Coordinates:<\/b><br/>\n         <span style='font-size: 0.9em; color: #555;'>\n           78.1837°N, 15.9128°E\n         <\/span>\n       <\/div>\n     <\/div>",null,"Observation 11",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.18983908779074,15.84128303108835,5,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":1.5,"opacity":0.5,"fill":true,"fillColor":"green","fillOpacity":0.8},null,null,"<div style='font-family: Arial, sans-serif; padding: 6px;'>\n       <div style='background-color: #2c3e50; color: white; padding: 4px 8px; \n                   border-radius: 3px 3px 0 0; font-weight: bold;'>\n         Observation 12\n       <\/div>\n       <div style='padding: 6px; border: 1px solid #ddd; border-top: none;\n                   border-radius: 0 0 3px 3px; background-color: #f9f9f9;'>\n         <b>Date: <\/b>2024-06-19<br/>\n         <b>Sex: <\/b>male<br/>\n         <b>Age: <\/b>adult<br/>\n         <b>Coordinates:<\/b><br/>\n         <span style='font-size: 0.9em; color: #555;'>\n           78.1898°N, 15.8413°E\n         <\/span>\n       <\/div>\n     <\/div>",null,"Observation 12",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.19026579049003,15.84245109821601,5,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":1.5,"opacity":0.5,"fill":true,"fillColor":"green","fillOpacity":0.8},null,null,"<div style='font-family: Arial, sans-serif; padding: 6px;'>\n       <div style='background-color: #2c3e50; color: white; padding: 4px 8px; \n                   border-radius: 3px 3px 0 0; font-weight: bold;'>\n         Observation 13\n       <\/div>\n       <div style='padding: 6px; border: 1px solid #ddd; border-top: none;\n                   border-radius: 0 0 3px 3px; background-color: #f9f9f9;'>\n         <b>Date: <\/b>2024-06-19<br/>\n         <b>Sex: <\/b>male<br/>\n         <b>Age: <\/b>adult<br/>\n         <b>Coordinates:<\/b><br/>\n         <span style='font-size: 0.9em; color: #555;'>\n           78.1903°N, 15.8425°E\n         <\/span>\n       <\/div>\n     <\/div>",null,"Observation 13",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.17381766676965,15.95748815042616,5,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":1.5,"opacity":0.5,"fill":true,"fillColor":"green","fillOpacity":0.8},null,null,"<div style='font-family: Arial, sans-serif; padding: 6px;'>\n       <div style='background-color: #2c3e50; color: white; padding: 4px 8px; \n                   border-radius: 3px 3px 0 0; font-weight: bold;'>\n         Observation 14\n       <\/div>\n       <div style='padding: 6px; border: 1px solid #ddd; border-top: none;\n                   border-radius: 0 0 3px 3px; background-color: #f9f9f9;'>\n         <b>Date: <\/b>2024-06-26<br/>\n         <b>Sex: <\/b>male<br/>\n         <b>Age: <\/b>adult<br/>\n         <b>Coordinates:<\/b><br/>\n         <span style='font-size: 0.9em; color: #555;'>\n           78.1738°N, 15.9575°E\n         <\/span>\n       <\/div>\n     <\/div>",null,"Observation 14",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.1694067551699,15.96600713972784,5,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":1.5,"opacity":0.5,"fill":true,"fillColor":"green","fillOpacity":0.8},null,null,"<div style='font-family: Arial, sans-serif; padding: 6px;'>\n       <div style='background-color: #2c3e50; color: white; padding: 4px 8px; \n                   border-radius: 3px 3px 0 0; font-weight: bold;'>\n         Observation 15\n       <\/div>\n       <div style='padding: 6px; border: 1px solid #ddd; border-top: none;\n                   border-radius: 0 0 3px 3px; background-color: #f9f9f9;'>\n         <b>Date: <\/b>2024-06-26<br/>\n         <b>Sex: <\/b>male<br/>\n         <b>Age: <\/b>adult<br/>\n         <b>Coordinates:<\/b><br/>\n         <span style='font-size: 0.9em; color: #555;'>\n           78.1694°N, 15.966°E\n         <\/span>\n       <\/div>\n     <\/div>",null,"Observation 15",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.1694305261456,15.96692672743852,5,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":1.5,"opacity":0.5,"fill":true,"fillColor":"green","fillOpacity":0.8},null,null,"<div style='font-family: Arial, sans-serif; padding: 6px;'>\n       <div style='background-color: #2c3e50; color: white; padding: 4px 8px; \n                   border-radius: 3px 3px 0 0; font-weight: bold;'>\n         Observation 16\n       <\/div>\n       <div style='padding: 6px; border: 1px solid #ddd; border-top: none;\n                   border-radius: 0 0 3px 3px; background-color: #f9f9f9;'>\n         <b>Date: <\/b>2024-06-26<br/>\n         <b>Sex: <\/b>male<br/>\n         <b>Age: <\/b>adult<br/>\n         <b>Coordinates:<\/b><br/>\n         <span style='font-size: 0.9em; color: #555;'>\n           78.1694°N, 15.9669°E\n         <\/span>\n       <\/div>\n     <\/div>",null,"Observation 16",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.16965169160051,15.967774835567,5,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":1.5,"opacity":0.5,"fill":true,"fillColor":"green","fillOpacity":0.8},null,null,"<div style='font-family: Arial, sans-serif; padding: 6px;'>\n       <div style='background-color: #2c3e50; color: white; padding: 4px 8px; \n                   border-radius: 3px 3px 0 0; font-weight: bold;'>\n         Observation 17\n       <\/div>\n       <div style='padding: 6px; border: 1px solid #ddd; border-top: none;\n                   border-radius: 0 0 3px 3px; background-color: #f9f9f9;'>\n         <b>Date: <\/b>2024-06-26<br/>\n         <b>Sex: <\/b>male<br/>\n         <b>Age: <\/b>adult<br/>\n         <b>Coordinates:<\/b><br/>\n         <span style='font-size: 0.9em; color: #555;'>\n           78.1697°N, 15.9678°E\n         <\/span>\n       <\/div>\n     <\/div>",null,"Observation 17",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.17157339563755,16.03314065456143,5,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":1.5,"opacity":0.5,"fill":true,"fillColor":"green","fillOpacity":0.8},null,null,"<div style='font-family: Arial, sans-serif; padding: 6px;'>\n       <div style='background-color: #2c3e50; color: white; padding: 4px 8px; \n                   border-radius: 3px 3px 0 0; font-weight: bold;'>\n         Observation 18\n       <\/div>\n       <div style='padding: 6px; border: 1px solid #ddd; border-top: none;\n                   border-radius: 0 0 3px 3px; background-color: #f9f9f9;'>\n         <b>Date: <\/b>2024-06-27<br/>\n         <b>Sex: <\/b>male<br/>\n         <b>Age: <\/b>adult<br/>\n         <b>Coordinates:<\/b><br/>\n         <span style='font-size: 0.9em; color: #555;'>\n           78.1716°N, 16.0331°E\n         <\/span>\n       <\/div>\n     <\/div>",null,"Observation 18",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.16915162443881,16.03865674111351,5,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":1.5,"opacity":0.5,"fill":true,"fillColor":"green","fillOpacity":0.8},null,null,"<div style='font-family: Arial, sans-serif; padding: 6px;'>\n       <div style='background-color: #2c3e50; color: white; padding: 4px 8px; \n                   border-radius: 3px 3px 0 0; font-weight: bold;'>\n         Observation 19\n       <\/div>\n       <div style='padding: 6px; border: 1px solid #ddd; border-top: none;\n                   border-radius: 0 0 3px 3px; background-color: #f9f9f9;'>\n         <b>Date: <\/b>2024-06-27<br/>\n         <b>Sex: <\/b>male<br/>\n         <b>Age: <\/b>adult<br/>\n         <b>Coordinates:<\/b><br/>\n         <span style='font-size: 0.9em; color: #555;'>\n           78.1692°N, 16.0387°E\n         <\/span>\n       <\/div>\n     <\/div>",null,"Observation 19",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.17106705863596,16.07321901530927,5,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":1.5,"opacity":0.5,"fill":true,"fillColor":"green","fillOpacity":0.8},null,null,"<div style='font-family: Arial, sans-serif; padding: 6px;'>\n       <div style='background-color: #2c3e50; color: white; padding: 4px 8px; \n                   border-radius: 3px 3px 0 0; font-weight: bold;'>\n         Observation 20\n       <\/div>\n       <div style='padding: 6px; border: 1px solid #ddd; border-top: none;\n                   border-radius: 0 0 3px 3px; background-color: #f9f9f9;'>\n         <b>Date: <\/b>2024-06-27<br/>\n         <b>Sex: <\/b>male<br/>\n         <b>Age: <\/b>adult<br/>\n         <b>Coordinates:<\/b><br/>\n         <span style='font-size: 0.9em; color: #555;'>\n           78.1711°N, 16.0732°E\n         <\/span>\n       <\/div>\n     <\/div>",null,"Observation 20",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[78.17159312714453,16.07868585521937,5,null,null,{"interactive":true,"className":"","stroke":true,"color":"white","weight":1.5,"opacity":0.5,"fill":true,"fillColor":"yellow","fillOpacity":0.8},null,null,"<div style='font-family: Arial, sans-serif; padding: 6px;'>\n       <div style='background-color: #2c3e50; color: white; padding: 4px 8px; \n                   border-radius: 3px 3px 0 0; font-weight: bold;'>\n         Observation 21\n       <\/div>\n       <div style='padding: 6px; border: 1px solid #ddd; border-top: none;\n                   border-radius: 0 0 3px 3px; background-color: #f9f9f9;'>\n         <b>Date: <\/b>2024-06-27<br/>\n         <b>Sex: <\/b>female<br/>\n         <b>Age: <\/b>yearling<br/>\n         <b>Coordinates:<\/b><br/>\n         <span style='font-size: 0.9em; color: #555;'>\n           78.1716°N, 16.0787°E\n         <\/span>\n       <\/div>\n     <\/div>",null,"Observation 21",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addLegend","args":[{"colors":["green","yellow","#95a5a6"],"labels":["male","female","unknown"],"na_color":null,"na_label":"NA","opacity":0.8,"position":"bottomright","type":"unknown","title":"Reindeer Sex","extra":null,"layerId":null,"className":"info legend","group":null}]}],"limits":{"lat":[78.16915162443881,78.19026579049003],"lng":[15.84128303108835,16.07868585521937]}},"evals":[],"jsHooks":[]}</script>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
